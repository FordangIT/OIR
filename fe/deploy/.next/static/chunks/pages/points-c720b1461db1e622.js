(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[181],{1658:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/points",function(){return t(324)}])},324:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var i=t(5893),n=t(5675),c=t.n(n),r=t(7294),a=t(5007),o=t(7227),l=t(8767);async function d(){let e=await fetch("".concat("https://korea-hospital.site","/charge"),{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),s=await e.json();if(!s.success)throw Error("".concat(s.message));return s}async function h(e){let s=await fetch("".concat("https://korea-hospital.site","/charge"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({point:e})}),t=await s.json();if(!t.success)throw Error("".concat(t.message));return t}function u(){let e=(0,a.v9)(e=>e.counter.value),s=(0,a.I0)(),t=(0,l.useQueryClient)(),[n,d]=(0,r.useState)(!0),u=(0,l.useMutation)(h,{onSuccess:()=>{t.invalidateQueries("userPoints")}}),f=()=>{s((0,o.nP)()),d(!1),setTimeout(()=>d(!0),100)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"col-position",children:[(0,i.jsx)("div",{className:"w-fit h-fit p-1 bg-main-green rounded-full row-position text-white font-semibold text-sm mb-2",children:e}),(0,i.jsx)("div",{className:"mb-3",children:Number(e)>=10?(0,i.jsx)(c(),{src:"/images/open.png",alt:"oir 보물상자 open",width:70,height:70,onClick:()=>{let t=Math.floor(e/10);t>0&&(u.mutate(t),s((0,o.mc)()))}}):(0,i.jsx)(c(),{src:"/images/close.png",alt:"oir 보물상자 close",width:60,height:60})}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"absolute right-0 font-bold text-main-red ".concat(n?"block":"hidden"),children:"click"}),n?(0,i.jsx)(c(),{src:"/images/click1.png",alt:"oir 포인트 충전",height:150,width:150,onClick:f}):(0,i.jsx)(c(),{src:"/images/click2.png",alt:"oir 포인트 충전",height:150,width:150,onClick:f})]})]})})}function f(){let{data:e,error:s,isLoading:t}=(0,l.useQuery)("userPoints",d);return t?(0,i.jsx)("div",{children:"Loading..."}):s instanceof Error?(0,i.jsxs)("div",{children:["Error: ",s.message]}):(0,i.jsxs)("div",{className:"row-position",children:[(0,i.jsx)(c(),{src:"/images/point.png",alt:"oir 포인트 이미지",height:20,width:20}),(0,i.jsxs)("p",{className:"mx-2",children:[null==e?void 0:e.data," 포인트"]})]})}function m(){return(0,i.jsxs)("div",{className:"flex flex-col h-full",children:[(0,i.jsx)("div",{className:"flex justify-end items-center p-5 h-8",children:(0,i.jsx)(f,{})}),(0,i.jsx)("div",{className:"flex-1 flex justify-center items-center",children:(0,i.jsx)(u,{})})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1658)}),_N_E=e.O()}]);