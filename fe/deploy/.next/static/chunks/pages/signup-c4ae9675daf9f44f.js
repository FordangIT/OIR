(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{8575:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return r(8615)}])},8615:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return k}});var t=r(5893),o=r(1163);let a=e=>{let{id:s,placeholder:r,icon:o,type:a="text",register:n,right:i,isRequired:c=!1}=e;return(0,t.jsxs)("div",{className:"flex flex-row w-full h-12 justify-center items-center ",children:[(0,t.jsx)("label",{className:"flex items-center justify-center text-gray-700 w-8 h-8 m-5",children:o}),(0,t.jsx)("input",{type:a,id:s,placeholder:r,...n,required:c,className:"w-full h-full focus:border focus:border-main-green focus:outline-none text-center transition duration-300 ease-in-out".concat(i?" mr-20":""),maxLength:20})]})};var n=r(5756),i=r(8767);async function c(e){let{school:s,userId:r,password:t,nickname:o}=e;try{let e=await fetch("".concat("https://korea-hospital.site","/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({school:s,userId:r,password:t,nickname:o,inbox:[],points:0})});return e.ok,await e.json()}catch(e){throw console.error("Error Sign up ",e),Error("Failed to Sign up")}}async function l(e){try{let s=await fetch("".concat("https://korea-hospital.site","/auth/check-userid?userId=").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});return s.ok,await s.json()}catch(e){throw console.error(e),Error("failed to check id")}}async function d(e){try{let s=await fetch("".concat("https://korea-hospital.site","/auth/check-nickname?nickname=").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});return s.ok,await s.json()}catch(e){throw console.error("Error checking nickname",e),Error("failed to check nickname")}}var u=r(7536),h=r(7533),m=r(6310);let p=m.Ry().shape({school:m.Z_().required("학교는 필수 항목입니다."),userId:m.Z_().matches(/^[a-z0-9]+$/,"아이디는 영소문자와 숫자만 허용됩니다.").required("아이디는 필수 항목입니다."),password:m.Z_().min(8,"비밀번호는 최소 8자 이상이어야 합니다.").required("비밀번호는 필수 항목입니다."),repassword:m.Z_().oneOf([m.iH("password"),void 0],"비밀번호가 일치해야 합니다.").required("비밀번호 확인은 필수 항목입니다. "),nickname:m.Z_().matches(/^[\uac00-\ud7a3a-z0-9]+$/,"닉네임은 한글, 영소문자, 숫자만 허용됩니다.").min(3,"닉네임은 최소 3자 이상이어야 합니다. ").required("닉네임은 필수 항목입니다. ")}),x=()=>{let{register:e,handleSubmit:s,formState:{errors:r},getValues:t,reset:o}=(0,u.cI)({resolver:(0,h.X)(p),mode:"onChange"});return{register:e,handleSubmit:s,errors:r,getValues:t,reset:o}},w=e=>{let{errors:s}=e;return(0,t.jsx)("div",{className:"row-position text-red-600 text-sm",children:s})};r(7294);let g=e=>{let{onClick:s,className:r}=e;return(0,t.jsx)("button",{type:"button",onClick:s,className:r,children:"중복 확인"})};function f(){let e=(0,o.useRouter)(),s=(0,i.useMutation)(c,{onSuccess:()=>{e.push("/login")},onError:()=>{console.log("회원가입에 실패했습니다. 다시 시도해주세요")}}),{register:r,handleSubmit:u,errors:h,getValues:m,reset:p}=x(),f=async()=>{let e=m("userId");try{let s=await l(e);alert(s.message),s.success||p()}catch(e){alert("다시 시도하세요 ".concat(e))}},j=async()=>{let e=m("nickname");try{let s=await d(e);alert(s.message),s.success||p()}catch(e){alert("다시 시도하세요 ".concat(e))}};return(0,t.jsxs)("form",{className:"flex flex-col justify-center items-center",onSubmit:u(e=>{s.mutate(e)}),children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 divide-y-2 my-3 w-full border-2 border-gray-200 rounded-md",children:[(0,t.jsx)(a,{id:"school",placeholder:"school(--중학교, --고등학교)",right:!1,icon:(0,t.jsx)(n.Z,{name:"school",className:"w-6 h-6 text-tosslogo-gray"}),register:r("school",{required:"학교는 필수 항목입니다."})}),h.school&&(0,t.jsx)(w,{errors:h.school.message})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 divide-y-2 w-full my-10 border-2 border-gray-200 rounded-md",children:[(0,t.jsxs)("div",{className:"row-position",children:[(0,t.jsx)(a,{id:"userId",placeholder:"userId",right:!1,icon:(0,t.jsx)(n.Z,{name:"userId",className:"w-6 h-6 text-tosslogo-gray"}),register:r("userId")}),(0,t.jsx)(g,{onClick:f,className:"flex justify-end items-center text-black text-sm w-24 p-1 border row-position mr-1 rounded-md border-tosslogo-gray"})]}),h.userId&&(0,t.jsx)(w,{errors:h.userId.message}),(0,t.jsx)(a,{id:"password",placeholder:"password",right:!0,icon:(0,t.jsx)(n.Z,{name:"password",className:"w-6 h-6 text-tosslogo-gray"}),type:"password",register:r("password")}),h.password&&(0,t.jsx)(w,{errors:h.password.message}),(0,t.jsx)(a,{id:"repassword",placeholder:"password 확인",right:!0,icon:(0,t.jsx)(n.Z,{name:"repassword",className:"w-6 h-6 text-tosslogo-gray"}),type:"password",register:r("repassword")}),h.repassword&&(0,t.jsx)(w,{errors:h.repassword.message}),(0,t.jsxs)("div",{className:"row-position",children:[(0,t.jsx)(a,{id:"nickname",placeholder:"nickname",right:!1,icon:(0,t.jsx)(n.Z,{name:"nickname",className:"w-6 h-6 text-tosslogo-gray"}),register:r("nickname")}),(0,t.jsx)(g,{onClick:j,className:"flex justify-end items-center text-black text-sm w-24 p-1 border row-position mr-1 rounded-md border-tosslogo-gray"})]}),h.nickname&&(0,t.jsx)(w,{errors:h.nickname.message})]}),(0,t.jsx)("button",{type:"submit",className:"w-full h-12 bg-main-orange font-semibold text-white rounded-md text-md",children:"승인 요청"})]})}var j=r(5675),y=r.n(j);function k(){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center bg-white h-full w-full",children:[(0,t.jsx)(y(),{src:"/images/text_logo.png",alt:"oir 로고",width:300,height:200,className:"my-5"}),(0,t.jsx)(f,{})]})}}},function(e){e.O(0,[216,888,774,179],function(){return e(e.s=8575)}),_N_E=e.O()}]);